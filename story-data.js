// 故事数据结构
const storyData = {
    // 场景ID作为键
    "start": {
        text: `黏腻的雨丝无声地落在玻璃窗上，留下一道道浑浊的水痕，模糊了路灯渐次熄灭的街景。黎明时分雨势渐停，空气里弥漫着泥土的潮气，沉沉地压在刘枭的心头。

他窝在书桌后那张宽大的扶手椅里，整个人几乎陷了进去。圆形镜片上倒映着电子屏幕的幽幽白光，密密麻麻的数据流、代码、跳动的实时反馈曲线闪烁其上。

就在他试图再次将目光聚焦在屏幕上时，轻微的脚步声在门外响起。刘枭没有抬头，甚至没有转动视线。但他知道——是Vein。`,
        choices: [
            {
                text: "继续工作，假装没听到",
                next: "ignore_vein"
            },
            {
                text: "站起身打开房门",
                next: "open_door"
            }
        ],
        chapter: "序章",
        time: "00:00 - 01:00",
        audio: "audio/forest_mixtape.mp3",  // 开始场景的背景音乐
        audioLoop: true
    },

    "ignore_vein": {
        text: `刘枭选择继续埋头工作，手指在键盘上机械地敲击着。但门外的脚步声并没有离开，反而更近了。

"Xavier，我知道你醒着。"Vein的声音透过门缝传来，带着一丝无奈的笑意。

刘枭叹了口气，他知道躲不过去了。`,
        choices: [
            {
                text: "起身开门",
                next: "open_door"
            }
        ],
        chapter: "序章",
        time: "00:00 - 01:00",
        audio: "audio/forest_mixtape.mp3",  // 继续使用同一音频，不会重新播放
        audioLoop: true
    },

    "open_door": {
        text: `刘枭将电脑锁屏后，站起身绕过书桌，打开房门。目光落在门口倚靠着的男人身上。

Vein今天穿了件质感极佳的紫色衬衫，下身的黑色高腰西装裤衬得腿型笔直修长。他微微歪着头，一头火焰般张扬的红发松散的编成蝎尾辫垂在肩侧，几缕不羁的碎发拂过额角。

"啧，"Vein带着点慵懒笑意的声音响起，"Xavier，再这么熬下去，我看你家公司的股价还没崩，你这张脸先要崩了。真成夜猫子了~"

"还好。"刘枭的声音带着长时间沉默后的干涩。"最后一批测试数据，今天早上九点前必须过完。"

"行，你是工作狂，你说了算。"Vein的语气听起来漫不经心。

"不过呢，"他话锋一转，像变魔术似的，手腕一翻将一个装着游戏兑换码的信封举到刘枭面前。深黑磨砂的封面上，用暗红色、仿佛干涸血液般扭曲的字体印着一个触目惊心的单词——《Pain》。`,
        choices: [
            {
                text: "接受礼物，今晚一起玩游戏",
                next: "accept_game"
            },
            {
                text: "委婉拒绝，说太累了",
                next: "polite_refuse"
            }
        ],
        chapter: "第一章",
        time: "02:00 - 03:00",
        audio: "audio/forest_mixtape.mp3",  // 同一音频会继续播放，不重新开始
        audioLoop: true
    },

    "polite_refuse": {
        text: `"Vein，谢谢你的好意，但我真的太累了。"刘枭揉了揉太阳穴，"也许改天？"

Vein眼中闪过一丝失望，但很快被理解的神色取代。"没关系，工作要紧。"

他转身准备离开，刘枭突然想起了什么。

"等等，Vein。"刘枭叫住他，"其实我也有东西要给你。"

他拿出了Nightshade乐队演唱会的VIP门票。`,
        choices: [
            {
                text: "邀请他一起去演唱会",
                next: "concert_invitation"
            }
        ],
        chapter: "第一章",
        time: "02:00 - 03:00"
    },

    "accept_game": {
        text: `刘枭看着Vein眼中毫不掩饰的期待，像个找到新奇玩具的大男孩，镜片后的眼神温和平静，将那一丝苦涩完美地掩藏起来。

"好。"他笑着回应。

然后，刘枭也拿出同样准备了很久的惊喜——Nightshade乐队世界巡演英都站的VIP门票。

"真巧，我也有礼物送给Vein。不过，今晚另有安排，一起去听Nightshade的演唱会，如何？"

Vein的眼睛瞬间亮了起来，那种近乎孩子般的兴奋让刘枭觉得所有的努力都值得了。`,
        choices: [
            {
                text: "前往演唱会场馆",
                next: "concert_venue"
            }
        ],
        chapter: "第一章",
        time: "18:00 - 19:00"
    },

    "concert_invitation": {
        text: `Vein接过门票，眼中闪过惊讶和感动。

"Nightshade...你怎么知道我喜欢他们？"

"上次你提起的时候，我记住了。"刘枭温和地说。

Vein看着手中的门票，又看看刘枭疲惫的脸，做了个决定。

"走吧，去听演唱会。音乐比游戏更能让人放松。"`,
        choices: [
            {
                text: "一起出发",
                next: "concert_venue"
            }
        ],
        chapter: "第一章",
        time: "18:00 - 19:00"
    },

    "concert_venue": {
        text: `暮色四合，将演唱会的举办场馆染上一层暖橘。刘枭和Vein并肩走在人行道上。

Vein步履轻快，嘴角噙着一丝显而易见的、孩子气的兴奋笑容，手舞足蹈地对着刘枭讲述Nightshade乐队的历史。

然而，两人的笑容在接近入场通道时，瞬间冻结了——人脸识别，验票进场。

刘枭的心猛地一沉。Vein的身份，在那场假死之后，官方记录里早已是一个"死人"。

Vein垂下眼睫，再抬起时，那空茫已被一种近乎野性的狡黠光芒取代。

"Xavier，听着，我现在有两个计划。"

"Plan A：你，刷脸，先进去。在里面接应我。至于我嘛……想办法溜进去。"

"Plan B：正好，打道回府！今晚，看我亲自带你通关《Pain》！"

"怎么样，Xavier？"`,
        choices: [
            {
                text: "选择Plan A - 冒险潜入",
                next: "sneak_in"
            },
            {
                text: "选择Plan B - 回家玩游戏",
                next: "go_home_play"
            }
        ],
        chapter: "第二章",
        time: "19:00 - 20:00"
    },

    "sneak_in": {
        text: `刘枭深吸一口气，目光在Vein脸上停留了片刻。那双红瞳里燃烧着的不仅是对音乐的渴望，更是对"活着"的执着。

"Plan A。"刘枭声音很轻，却带着不容置疑的坚定。

Vein挑了挑眉："确定？Xavier，这可不是你的风格。"

"偶尔改变一下也不错。"刘枭推了推眼镜，"你先在这里等着，我进去后会给你发信号。"

刘枭刷脸进入后，迅速观察了场馆内部结构。他发现了员工通道的位置，趁着开场前的混乱，悄悄推开了一扇紧急出口的门，用一块小石子卡住门缝。

十分钟后，Vein收到了刘枭的信息。`,
        choices: [
            {
                text: "Vein尝试从后门进入",
                next: "back_door_entry"
            }
        ],
        chapter: "第二章",
        time: "19:30 - 20:00"
    },

    "back_door_entry": {
        text: `Vein绕到场馆后方，找到了那扇虚掩的门。就在他即将踏入时，一道手电筒的光束突然打在他脸上。

"站住！你是谁？"一个保安的声音响起。

Vein眯起眼睛，手指微微动了动。多年的训练让他的反应快如闪电，但就在他准备行动的瞬间，刘枭的声音从保安身后响起：

"他是我的朋友，刚才忘带东西了。我陪他出来拿。"

保安狐疑地看着他们，但最终还是让他们通过了。两人快步走进场馆，在人群中找到了自己的位置。

灯光暗下，Nightshade乐队登场的那一刻，Vein的眼睛亮了起来。贝斯的第一个音符响起时，他下意识地握住了刘枭的手。

"谢谢你，Xavier。"他的声音几乎被音乐淹没，但刘枭听得很清楚。

今晚，Vein感觉自己真的活着。不是作为一个躲藏的幽灵，而是作为...Vein。`,
        choices: [
            {
                text: "演唱会结束，两人走在深夜的街道上",
                next: "concert_end"
            }
        ],
        chapter: "第三章",
        time: "22:00 - 23:00"
    },

    "concert_end": {
        text: `演唱会结束后，两人走在深夜的街道上。Vein哼着刚才的旋律，步伐轻快。

"你知道吗，"他突然说，"今晚我感觉自己真的活着。不是作为一个躲藏的幽灵，而是作为...Vein。"

刘枭看着他在路灯下拉长的影子，嘴角浮起一丝温柔的笑意："你一直都是Vein。"

"Xavier，"Vein停下脚步，转身面对刘枭，"我知道总有一天，这种日子会结束。但至少现在，有你在身边，我觉得...一切都值得。"

月光洒在两人身上，这一刻，时间仿佛静止了。

【结局：演唱会之夜】
两人的关系更加亲密，Vein对刘枭的信任加深。这次冒险让刘枭意识到，他愿意为Vein冒任何风险。`,
        choices: [
            {
                text: "重新开始",
                next: "start"
            }
        ],
        chapter: "终章",
        time: "23:00 - 00:00",
        isEnding: true
    },

    "go_home_play": {
        text: `刘枭的目光迅速扫过眼前的场馆，无奈却又带着点如释重负的浅笑浮现在唇边。

"选第二个，回家玩《Pain》吧。"他顿了顿，"另外，声明一下，虽然工作很忙，但我可不是什么游戏菜鸟。"

Vein闻言，眼角眉梢那抹狡黠的笑意瞬间绽开："走啦走啦，回家打游戏！Xavier就好好看我一命通关吧！"

说罢他拽着刘枭的手腕，转身离开了场馆。`,
        choices: [
            {
                text: "回到公寓开始游戏",
                next: "start_gaming"
            }
        ],
        chapter: "第二章",
        time: "20:00 - 21:00"
    },

    "start_gaming": {
        text: `公寓的门在身后合拢，将外面世界的喧嚣彻底隔绝。屋内只开了一盏落地灯，昏黄温暖的光线填满了小小的书房。

刘枭脱下西装外套，开始在电脑上下载《Pain》、激活内测码。

Vein从冰箱里拿来两瓶碳酸饮料，舒服地窝在沙发椅中。

开场动画是游戏的两位主角因寻宝误入暗红色古堡。屏幕中央，那用扭曲尖锐字体写就的"PAIN"单词如同一个淌血的伤口。

"新手难度？"刘枭问道。

Vein嗤笑一声："看不起谁呢？直接来！地狱难度！"`,
        choices: [
            {
                text: "开始地狱难度挑战",
                next: "hell_mode"
            }
        ],
        chapter: "第三章",
        time: "21:00 - 22:00"
    },

    "hell_mode": {
        text: `刘枭选择了标注着狰狞骷髅头的"地狱"难度。屏幕瞬间暗了下去，只有主控手中一盏老式煤油灯摇曳着微弱昏黄的光晕。

"左转！前面有东西！"刘枭的声音冷静而快速。

然而话音未落，一个腐烂的怪物从头顶扑下！

"Oh,sh*t！"Vein几乎同时发出一声短促的惊叫，身体猛地向后一仰。

接下来的时间里，Vein的"地狱难度"之旅充满了惊险和惨叫。但他的操作也以惊人的速度变得流畅起来。

终于，他们来到了最终Boss战——优雅的幽灵。`,
        choices: [
            {
                text: "幽灵发出邀请：'你们是我的朋友吗？'",
                next: "ghost_question"
            }
        ],
        chapter: "第四章",
        time: "23:00 - 00:00"
    },

    "ghost_question": {
        text: `舞厅中央，那位优雅的幽灵身着考究的礼服，背对着入口。

进入舞厅后，"幽灵"微微躬身，向玩家行了一个无可挑剔的邀舞礼，发出无声的邀请。

屏幕上浮现出一行血字："你们——是我的朋友吗？"

Vein被这不按常理出牌的一幕搞得有些不知所措。`,
        choices: [
            {
                text: "接受邀舞",
                next: "accept_dance"
            },
            {
                text: "拒绝邀舞",
                next: "refuse_dance"
            },
            {
                text: "沉默观察",
                next: "silent_observe"
            }
        ],
        chapter: "第四章",
        time: "23:30 - 00:00"
    },

    "accept_dance": {
        text: `Vein和刘枭对视一眼，几乎同时按下了"接受"按钮。

屏幕上的画面突然变得柔和起来。幽灵缓缓转身，露出一张虽然苍白但依然英俊的脸庞。华尔兹的旋律响起，温柔忧伤的小提琴声填满了整个舞厅。

"跳舞小游戏？"Vein惊讶地看着屏幕上出现的节奏提示。

这是一个需要两名玩家配合的音乐节奏游戏。起初，Vein手忙脚乱，但渐渐地，他找到了节奏。刘枭则精准地配合着。

随着舞蹈的进行，幽灵的表情逐渐柔和。在舞曲的高潮部分，整个舞厅仿佛回到了它最辉煌的时代。

"原来他们曾经是最好的朋友..."Vein喃喃道。

舞曲结束，幽灵深深鞠躬："谢谢你们，让我想起了...我曾经也被爱过。"

随着光芒散去，古堡开始如冰雪消融般解体。阳光第一次照进这个被诅咒了百年的地方。

屏幕上出现了特殊结局标识：【永恒的华尔兹】`,
        choices: [
            {
                text: "游戏结束，Vein有话要说",
                next: "vein_confession"
            }
        ],
        chapter: "终章",
        time: "00:00 - 01:00"
    },

    "refuse_dance": {
        text: `"开什么玩笑！"Vein毫不犹豫地选择了拒绝。

幽灵的表情瞬间扭曲："背叛者！你们都是背叛者！"

Boss战瞬间进入狂暴模式。幽灵的攻击速度和伤害都翻倍，舞厅的地板开始崩裂。

"该死！"Vein手忙脚乱地躲避着。

战斗持续了整整二十分钟。就在幽灵准备发动最后一击时，Vein突然注意到了什么。

"Xavier！那些雕像！把他们推到水池里！"

两人分头行动，将雕像推入水池。幽灵的动作突然停止了。

"我的朋友们..."他跪倒在水池边，"对不起...我只是...太孤独了..."

他的身体开始消散，如同星尘般的银色光点。

屏幕显示：【孤独者的终曲】

"这个结局...有点悲伤啊。"Vein轻声说。

刘枭握住了他的手："但至少，你不是一个人。"`,
        choices: [
            {
                text: "游戏结束，两人相视而笑",
                next: "bittersweet_end"
            }
        ],
        chapter: "终章",
        time: "00:00 - 01:00"
    },

    "silent_observe": {
        text: `两人都没有立即做出选择，而是操控角色在舞厅中缓缓移动。

30秒的选择时间即将结束时，意外发生了。

幽灵缓缓放下了行礼的手："你们...在犹豫。就像当年的我一样。"

画面切换到了一段回忆。年轻的幽灵和他的朋友们在争论着什么。

"我当时也犹豫了，"幽灵的声音充满懊悔，"如果我当时勇敢一点，或许一切都会不同。"

他按下一个机关，露出了密室。中央的水晶球里保存着三个人最快乐时光的影像。

"这是真正的宝藏——记忆。带走它吧。让外面的世界知道，我们曾经...真心相爱过。"

"而我，要去找他们了。在另一个世界，也许我们能重新开始。"

屏幕显示：【见证者】

"这个结局..."Vein眨了眨眼，"居然是个温馨结局？"

"有时候，"刘枭轻声说，"不做选择，也是一种选择。"`,
        choices: [
            {
                text: "Vein若有所思",
                next: "thoughtful_end"
            }
        ],
        chapter: "终章",
        time: "00:00 - 01:00"
    },

    "vein_confession": {
        text: `"这个结局..."Vein转头看向刘枭，眼中闪烁着异样的光芒，"比净化结局还要难触发吧？"

刘枭轻咳一声："是有点难度。"

"等等，"Vein眯起眼睛，"你怎么知道得这么清楚？"

刘枭推了推眼镜，决定坦白："其实，这个游戏是雀德出品的，而我..."

"是那个'虐待玩家的设计师'对吧？"Vein打断他，嘴角勾起一抹了然的笑容。

"Logo我早就看到了。不过..."他顿了顿，"谢谢你陪我通关。作为一个设计师，陪菜鸟玩自己的游戏，一定很无聊吧？"

"不，"刘枭摇头，看着Vein的眼睛，"和你一起玩，让我重新发现了这个游戏的乐趣。"

Vein沉默了一会儿，然后轻声说："Xavier，你送我的演唱会门票，我送你的游戏...我们的礼物好像都错位了。"

"但是，"他抬起头，眼中闪烁着温柔的光，"能这样并肩坐在这里，分享着尖叫与破关的狂喜...这份陪伴本身，或许才是最好的礼物。"

【真·结局：错位的礼物】
命运的礼物从来不会按照预期到来，但正是这些美丽的错位，让生活充满惊喜。`,
        choices: [
            {
                text: "重新开始新的故事",
                next: "start"
            }
        ],
        chapter: "终章·完",
        time: "01:00 - 02:00",
        isEnding: true
    },

    "bittersweet_end": {
        text: `Vein放下手柄，沉默了很久。

"Xavier，"他最终开口，"这个结局让我想起了我自己。被困在一个身份里，无法逃脱。"

刘枭关掉了游戏，转身面对Vein："但你不是一个人。我们会找到办法的。"

"就像游戏里一样？"Vein苦笑。

"不，"刘枭认真地说，"比游戏更真实。因为这是我们的选择。"

两人相视而笑，虽然带着一丝苦涩，但更多的是对未来的希望。

【结局：苦涩的甜蜜】
有些礼物带着遗憾，有些快乐混着泪水。但正是这些复杂的情感，构成了真实的人生。`,
        choices: [
            {
                text: "重新开始",
                next: "start"
            }
        ],
        chapter: "终章",
        time: "00:00 - 01:00",
        isEnding: true
    },

    "thoughtful_end": {
        text: `Vein若有所思地点点头，然后突然笑了："不过下次，我要试试所有结局。这游戏...还挺有意思的。"

刘枭看着他兴致勃勃的样子，心中涌起一阵暖意。

"Xavier，"Vein突然说，"谢谢你。不只是游戏，还有...一切。"

"虽然演唱会没能进去，但今晚...很完美。"

刘枭握住Vein的手："礼物可能会错位，但心意永远不会。"

【结局：完美的不完美】
生活中充满了计划之外的意外，但正是这些意外，让每一个瞬间都独一无二。`,
        choices: [
            {
                text: "重新开始",
                next: "start"
            }
        ],
        chapter: "终章",
        time: "00:00 - 01:00",
        isEnding: true
    }
};

// 导出故事数据供游戏引擎使用
if (typeof module !== 'undefined' && module.exports) {
    module.exports = storyData;
}